{% extends "storefront/base.html" %}
{% block title %}Complete Your Profile â€” AuroraMart{% endblock %}

{% block content %}
<div class="auth-card" style="max-width:600px;">
  <h2>Complete Your Profile</h2>
  <p class="subtitle">Help us personalize your shopping experience</p>

  {% if form.non_field_errors %}
    <div class="error-message">
      {% for error in form.non_field_errors %}
        {{ error }}
      {% endfor %}
    </div>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    
    <h3>Required Information</h3>
    <div class="section">
      <label>Age</label><br>
      {{ form.age }}
      {% for error in form.age.errors %}
        <div class="field-errors">{{ error }}</div>
      {% endfor %}
    </div>
    
    <div class="section">
      <label>Gender</label><br>
      {{ form.gender }}
      {% for error in form.gender.errors %}
        <div class="field-errors">{{ error }}</div>
      {% endfor %}
    </div>
    
    <div class="section">
      <label>Preferred Categories (select up to 3)</label><br>
      {{ form.preferred_categories }}
      {% for error in form.preferred_categories.errors %}
        <div class="field-errors">{{ error }}</div>
      {% endfor %}
    </div>

    <div class="section" style="margin-top:32px;">
      <h3>Optional Information</h3>
      <p class="muted" style="font-size:14px;margin-bottom:20px;">
        These optional questions help us improve recommendations and personalize your shopping experience.
      </p>

      <div class="grid" style="gap:20px;">
        <div>
          <label>Employment Status</label><br>
          {{ form.employment_status }}
          {% for error in form.employment_status.errors %}
            <div class="field-errors">{{ error }}</div>
          {% endfor %}
        </div>
        
        <div>
          <label>Occupation</label><br>
          {{ form.occupation }}
          {% for error in form.occupation.errors %}
            <div class="field-errors">{{ error }}</div>
          {% endfor %}
        </div>
        
        <div>
          <label>Education Level</label><br>
          {{ form.education }}
          {% for error in form.education.errors %}
            <div class="field-errors">{{ error }}</div>
          {% endfor %}
        </div>
        
        <div>
          <label>Household Size</label><br>
          {{ form.household_size }}
          {% for error in form.household_size.errors %}
            <div class="field-errors">{{ error }}</div>
          {% endfor %}
        </div>
        
        <div>
          <label for="{{ form.has_children.id_for_label }}">{{ form.has_children.label }}</label><br>
          <label class="checkbox-label" for="{{ form.has_children.id_for_label }}">
            {{ form.has_children }}
            <span>Yes</span>
          </label>
          {% for error in form.has_children.errors %}
            <div class="field-errors">{{ error }}</div>
          {% endfor %}
        </div>
        
        <div>
          <label>Monthly Income (SGD)</label><br>
          {{ form.monthly_income }}
          {% for error in form.monthly_income.errors %}
            <div class="field-errors">{{ error }}</div>
          {% endfor %}
        </div>
      </div>
    </div>

    <div class="section" style="margin-top:32px;">
      <button class="chip primary" type="submit">Complete Profile</button>
    </div>
  </form>
</div>

<style>
  .subtitle { color: #6b7280; margin-bottom: 24px; }
  .section { margin-bottom: 20px; }
  .grid { display: grid; grid-template-columns: repeat(2, 1fr); }
  input, select { width: 100%; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; }
  .checkbox-label { display: flex; align-items: center; gap: 8px; }
  input[type="checkbox"] { width: auto; }
  ul { list-style: none; padding: 0; }
  .muted { color: #6b7280; }
  .error-message { background: #fee2e2; color: #b91c1c; padding: 16px; border-radius: 10px; margin-bottom: 20px; font-size: 1rem; font-weight: 600; }
  .field-errors { color: #b91c1c; font-size: 1rem; margin-top: 8px; font-weight: 600; }
  @media (max-width: 640px) {
    .grid { grid-template-columns: 1fr; }
  }
</style>
{% endblock %}