{% extends "storefront/base.html" %}
{% block title %}Shop Products â€” AuroraMart{% endblock %}
{% block content %}
<h2>All Products</h2>
<form method="get" class="search">
  <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Search products...">
  <button type="submit">Search</button>
</form>

{% include "storefront/partials/category_filters.html" %}

<div class="grid section">
  {% for product in products %}
    <a class="card" href="{% url 'storefront:product_detail' product.id %}" style="position:relative;">
      {% if product.stock|default:0 < 5 %}
        <div class="product-badge">Last pieces</div>
      {% endif %}
      {% if product.image %}
        <div style="height:160px; overflow:hidden; display:flex; align-items:center; justify-content:center; margin-bottom:8px;">
          <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-height:160px; width:auto;">
        </div>
      {% endif %}
      <strong>{{ product.name }}</strong><br>
      <small>${{ product.price }}</small><br>
      <small class="text-muted" style="font-size: 0.8em;">SKU: {{ product.sku|default:"N/A" }}</small>
    </a>
  {% empty %}
    <p>No products found.</p>
  {% endfor %}
</div>
{% endblock %}