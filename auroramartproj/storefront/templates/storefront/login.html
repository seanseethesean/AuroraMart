{% extends "storefront/base.html" %}

{% block title %}Login â€” AuroraMart{% endblock %}

{% block extra_head %}
<style>
  .auth-card{max-width:420px;margin:32px auto;padding:20px;border:1px solid #e5e7eb;border-radius:12px;background:#fff}
  .auth-card h2{margin:0 0 12px 0}
  .section{margin-bottom:14px}
  .chip.primary{padding:10px 14px;border-radius:8px;background:#111827;color:#fff;border:1px solid #111827}
  .link{color:#0ea5e9;text-decoration:none}
</style>
{% endblock %}

{% block content %}
<div class="auth-card">
  <h2>Login</h2>
  {% if messages %}
    <div class="section">
      {# show only the first message to avoid duplicates #}
      {% for message in messages %}
        {% if forloop.first %}
          {% if 'error' in message.tags %}
            <div class="muted" style="color:#dc2626; margin-bottom:8px;">{{ message }}</div>
          {% else %}
            <div class="muted" style="color:#064e3b; margin-bottom:8px;">{{ message }}</div>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}
  <form method="post">
    {% csrf_token %}
    <div class="section">
      <label>Username</label><br>
      <input type="text" name="username" required>
    </div>
    <div class="section">
      <label>Password</label><br>
      <input type="password" name="password" required>
    </div>
    <button class="chip primary auth-button" type="submit">Login</button>
  </form>
  <p>Don't have an account? Register
    <a href="{% url 'storefront:register' %}" class="link">here</a>.
  </p>
</div>
{% endblock %}

{% block extra_body %}
<script>
  // Optional: autofocus username
  document.addEventListener('DOMContentLoaded', () => {
    const el = document.querySelector('input[name="username"]');
    if (el) el.focus();
  });
</script>
{% endblock %}
