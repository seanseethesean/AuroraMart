{% extends "storefront/base.html" %}

{% block title %}Login â€” AuroraMart{% endblock %}

{% block extra_head %}
<style>
  .auth-card{max-width:420px;margin:32px auto;padding:20px;border:1px solid #e5e7eb;border-radius:12px;background:#fff}
  .auth-card h2{margin:0 0 12px 0}
  .section{margin-bottom:14px}
  .chip.primary{padding:10px 14px;border-radius:8px;background:#111827;color:#fff;border:1px solid #111827}
  .link{color:#0ea5e9;text-decoration:none}
  .auth-card input{width:100%;padding:10px;border-radius:8px;border:1px solid #d1d5db}
  .error-message{background:#fee2e2;color:#b91c1c;padding:12px;border-radius:8px;margin-bottom:16px}
  .field-errors{color:#b91c1c;font-size:0.875rem;margin-top:6px}
</style>
{% endblock %}

{% block content %}
<div class="auth-card">
  <h2>Login</h2>
  {% if form.non_field_errors %}
    <div class="error-message">
      {% for error in form.non_field_errors %}
        {{ error }}
      {% endfor %}
    </div>
  {% endif %}
  <form method="post" novalidate>
    {% csrf_token %}
    <div class="section">
      <label>Username</label><br>
      {{ form.username }}
      {% for error in form.username.errors %}<div class="field-errors">{{ error }}</div>{% endfor %}
    </div>
    <div class="section">
      <label>Password</label><br>
      {{ form.password }}
      {% for error in form.password.errors %}<div class="field-errors">{{ error }}</div>{% endfor %}
    </div>
    <button class="chip primary auth-button" type="submit">Login</button>
  </form>
  <p>Don't have an account? Register
    <a href="{% url 'storefront:register' %}" class="link">here</a>.
  </p>
</div>
{% endblock %}

{% block extra_body %}
<script>
  // Optional: autofocus username
  document.addEventListener('DOMContentLoaded', () => {
    const el = document.querySelector('input[name="username"]');
    if (el) el.focus();
  });
</script>
{% endblock %}
